set system host-name vmx2
set system domain-name eve-alfa.com
set system root-authentication encrypted-password "yourpassword"
set system login user ansible uid 2001
set system login user ansible class super-user
set system login user ansible authentication ssh-rsa "ssh-rsa  ansible"
set system login user lab uid 2000
set system login user lab class super-user
set system login user lab authentication encrypted-password "yourpassword"
set system services ssh
set system services netconf ssh
set system syslog user * any emergency
set system syslog file messages any notice
set system syslog file messages authorization info
set system syslog file interactive-commands interactive-commands any
set chassis network-services enhanced-ip
set interfaces ge-0/0/0 description "NNI-1 to SW01-NNI-2 eth0/3"
set interfaces ge-0/0/0 per-unit-scheduler
set interfaces ge-0/0/0 flexible-vlan-tagging
set interfaces ge-0/0/0 encapsulation flexible-ethernet-services
set interfaces ge-0/0/0 unit 2001 description "VPN0003 RI0001 ASH02-R1"
set interfaces ge-0/0/0 unit 2001 vlan-id 2001
set interfaces ge-0/0/0 unit 2001 family inet address 10.10.0.5/30
set interfaces ge-0/0/0 unit 2002 description "VPN0004 RI0002 OAK02-R1"
set interfaces ge-0/0/0 unit 2002 vlan-id 2002
set interfaces ge-0/0/0 unit 2002 family inet address 10.20.0.5/30
set interfaces ge-0/0/1 description "Core link to vmx1 ge-0/0/1"
set interfaces ge-0/0/1 unit 0 family inet address 172.17.10.2/30
set interfaces ge-0/0/1 unit 0 family iso
set interfaces ge-0/0/1 unit 0 family mpls
set interfaces ge-0/0/2 description "Core link to vmx4 ge-0/0/1"
set interfaces ge-0/0/2 unit 0 family inet address 172.17.10.13/30
set interfaces ge-0/0/2 unit 0 family iso
set interfaces ge-0/0/2 unit 0 family mpls
set interfaces ge-0/0/3 description "Core link to vmx3 ge-0/0/3"
set interfaces ge-0/0/3 unit 0 family inet address 172.17.10.5/30
set interfaces ge-0/0/3 unit 0 family iso
set interfaces ge-0/0/3 unit 0 family mpls
set interfaces em0 description "Mgmt to net"
set interfaces em0 unit 0 family inet address 192.168.0.202/24
set interfaces irb unit 0 family inet address 10.11.11.251/24
set interfaces lo0 unit 0 family inet address 127.0.0.1/32
set interfaces lo0 unit 0 family inet address 172.17.100.102/32
set interfaces lo0 unit 0 family iso address 49.0001.1720.1710.0102.00
set routing-options autonomous-system 100
set protocols rsvp interface ge-0/0/1.0
set protocols rsvp interface ge-0/0/2.0
set protocols rsvp interface ge-0/0/3.0
set protocols rsvp interface lo0.0
set protocols mpls no-propagate-ttl
set protocols mpls label-switched-path to-vmx1 to 172.17.100.101
set protocols mpls label-switched-path to-vmx1 no-cspf
set protocols mpls label-switched-path to-vmx3 to 172.17.100.103
set protocols mpls label-switched-path to-vmx3 no-cspf
set protocols mpls label-switched-path to-vmx4 to 172.17.100.104
set protocols mpls label-switched-path to-vmx4 no-cspf
set protocols mpls interface ge-0/0/1.0
set protocols mpls interface ge-0/0/2.0
set protocols mpls interface ge-0/0/3.0
set protocols bgp log-updown
set protocols bgp family evpn signaling
set protocols bgp group RR-Clients type internal
set protocols bgp group RR-Clients local-address 172.17.100.102
set protocols bgp group RR-Clients family inet unicast
set protocols bgp group RR-Clients family inet-vpn unicast
set protocols bgp group RR-Clients family inet6-vpn unicast
set protocols bgp group RR-Clients family l2vpn signaling
set protocols bgp group RR-Clients family evpn signaling
set protocols bgp group RR-Clients family route-target
set protocols bgp group RR-Clients authentication-key "yourauthkey"
set protocols bgp group RR-Clients cluster 172.17.100.102
set protocols bgp group RR-Clients neighbor 172.17.100.101 description vmx1
set protocols bgp group RR-Clients neighbor 172.17.100.103 description vmx3
set protocols bgp group RR-Clients neighbor 172.17.100.104 description vmx4
set protocols isis reference-bandwidth 1g
set protocols isis level 2 authentication-type md5
set protocols isis level 2 wide-metrics-only
set protocols isis interface ge-0/0/1.0 point-to-point
set protocols isis interface ge-0/0/1.0 bfd-liveness-detection minimum-interval 100
set protocols isis interface ge-0/0/1.0 bfd-liveness-detection multiplier 3
set protocols isis interface ge-0/0/1.0 level 1 disable
set protocols isis interface ge-0/0/2.0 point-to-point
set protocols isis interface ge-0/0/2.0 bfd-liveness-detection minimum-interval 100
set protocols isis interface ge-0/0/2.0 bfd-liveness-detection multiplier 3
set protocols isis interface ge-0/0/2.0 level 1 disable
set protocols isis interface ge-0/0/3.0 point-to-point
set protocols isis interface ge-0/0/3.0 bfd-liveness-detection minimum-interval 100
set protocols isis interface ge-0/0/3.0 bfd-liveness-detection multiplier 3
set protocols isis interface ge-0/0/3.0 level 1 disable
set protocols isis interface lo0.0 level 1 disable
set protocols isis interface lo0.0 level 2 passive
set policy-options policy-statement EXPORT-DIRECT from protocol direct
set policy-options policy-statement EXPORT-DIRECT then accept
set routing-instances RI0001 description ASH
set routing-instances RI0001 instance-type vrf
set routing-instances RI0001 interface ge-0/0/0.2001
set routing-instances RI0001 route-distinguisher 100:0001102
set routing-instances RI0001 vrf-target target:100:0001
set routing-instances RI0001 routing-options maximum-prefixes 100 threshold 80
set routing-instances RI0001 protocols bgp group ASH-PEERS export EXPORT-DIRECT
set routing-instances RI0001 protocols bgp group ASH-PEERS neighbor 10.10.0.6 description "VPN0003 ASH02-R1"
set routing-instances RI0001 protocols bgp group ASH-PEERS neighbor 10.10.0.6 authentication-key "yourashauthkey"
set routing-instances RI0001 protocols bgp group ASH-PEERS neighbor 10.10.0.6 peer-as 65001
set routing-instances RI0002 description OAK
set routing-instances RI0002 instance-type vrf
set routing-instances RI0002 interface ge-0/0/0.2002
set routing-instances RI0002 route-distinguisher 100:0002102
set routing-instances RI0002 vrf-target target:100:0002
set routing-instances RI0002 routing-options maximum-prefixes 100 threshold 80
set routing-instances RI0002 protocols bgp group OAK-PEERS export EXPORT-DIRECT
set routing-instances RI0002 protocols bgp group OAK-PEERS neighbor 10.20.0.6 description "VPN0004 OAK02-R1"
set routing-instances RI0002 protocols bgp group OAK-PEERS neighbor 10.20.0.6 authentication-key "youroakauthkey"
set routing-instances RI0002 protocols bgp group OAK-PEERS neighbor 10.20.0.6 peer-as 65001
